@model CreateItemsRequest
@{
    ViewData["Title"] = "Create Items";
    var nextIndex = ViewBag.NextIndex as int? ?? 1;
}

<h1 class="mb-3">Create Items (ASP.NET Core MVC + Bootstrap + htmx)</h1>

<form id="itemsForm"
      hx-boost="true"
      hx-post="/Items/Create"
      hx-target="#result"
      hx-swap="innerHTML"
      method="post">

  <input type="hidden" id="ix" name="ix" value="@nextIndex" />

  <div id="rows">
    @Html.Partial("_ItemRow", new ItemRowVm { Index = 0, Variant = Model.Items.FirstOrDefault()?.Type ?? "product" })
  </div>

  <div class="d-flex justify-content-between align-items-center mt-3">
    <div class="btn-group" role="group">
      <button type="button"
              class="btn btn-primary"
              hx-get="/Items/NewRow?variant=product"
              hx-target="#rows"
              hx-swap="beforeend"
              hx-include="#ix">
        + Add Product card
      </button>
      <button type="button"
              class="btn btn-info"
              hx-get="/Items/NewRow?variant=service"
              hx-target="#rows"
              hx-swap="beforeend"
              hx-include="#ix">
        + Add Service card
      </button>
      <button type="button"
              class="btn btn-warning"
              hx-get="/Items/NewRow?variant=note"
              hx-target="#rows"
              hx-swap="beforeend"
              hx-include="#ix">
        + Add Note card
      </button>
    </div>

    <div class="btn-group" role="group">
      <button type="reset" class="btn btn-outline-secondary">Reset</button>
      <button type="submit" class="btn btn-success">Submit</button>
    </div>
  </div>

  <div id="result" class="mt-4"></div>
</form>
